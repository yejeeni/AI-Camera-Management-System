# AI-Camera-Management-System
AI 카메라 관제 시스템

## 프로젝트 소개
YOLO로 객체를 인식할 수 있는 카메라 장비를 관리하는 시스템입니다. 카메라의 객체 인식 기록을 확인하고, 장애 관리 스케줄링을 통해 장비의 장애 발생 및 복구 여부를 관리할 수 있는 시스템입니다. 

등록된 장비는 지도 상에서 마커를 통해 위치, 상태, 정보를 손쉽게 확인할 수 있으며, 실시간 스트리밍 영상을 확인할 수 있습니다.

장비가 수집한 기록은 분석 스케줄링을 통해 통계분석으로 수치와 그래프를 제공합니다. <br> <br>

## 개발 기간
- 전체: 2024.01.03 ~ 2024.02.16
- 요구사항 분석 및 설계: 2024.01.03 ~ 2023.01.11.
- 개발: 2024.01.12 ~ 2024.02.08.
- 테스트: 2024.02.13 ~ 2024.02.16. <br> <br>

### 업무분장
- 이세현: 프로젝트 관리 및 Python 개발
- 김예진: DB 설계, 스케줄링, Python - Node.js 통신, 통계분석, 실시간 관제
- 김재민: 기능 정의서 작성, 사용자 관리 모듈, 암호화 및 복호화
- 황대찬: 화면 정의서 작성, 장비 모듈, 장애 모듈, KakaoMap API 지도 <br> <br>

### 개발환경
- Front-end: HTML, CSS, JS, Vue.js, KakaoMap API
- Back-end: Spring legacy, PostgreSQL, Node.js
- 버전 및 이슈 관리: Yona
- 협업 툴: Trello
- 디자인: Figma <br> <br> <br>

## 페이지 상세
**1. 로그인**  

![로그인](https://github.com/yejeeni/AI-Camera-Management-System/assets/110469361/b7261c19-4720-4f2a-b3c2-d0ca412b1af0) <br> <br>
아이디, 비밀번호를 입력하여 로그인할 수 있습니다. 로그인하지 않은 상태로 링크를 통해 다른 페이지에 접근할 경우 로그인창이 나타나게 됩니다. <br> <br>

**2. 메인**

![메인](https://github.com/yejeeni/AI-Camera-Management-System/assets/110469361/6155222d-f549-496f-935c-e1dc89f439b0) <br>
- 오늘 누적 인식 수<br>
  오늘 하루 동안 모든 장비가 인식한 보행자, 자전거, 승용차, 오토바이, 버스, 트럭의 수를 누적하여 수치와 막대 그래프로 보여줍니다.
  
- 실시간 관제 / 통계분석<br>
  클릭 시 해당 페이지로 이동합니다.
  
- 장애 발생 내역 / 상황 발생 내역<br>
  모든 장비에서 발생한 장애 정보, 인식한 상황에 대한 기록을 최근 5건까지 노출합니다. 클릭 시 각각의 조회 페이지로 이동합니다.<br> <br>

**3. 실시간 관제**
1. 실시간 현황 관제

![지도-클러스터](https://github.com/yejeeni/AI-Camera-Management-System/assets/110469361/3f9cce81-f912-4dc7-a894-99429bc30746) <br> <br>
   등록된 장비를 지도 상에서 마커를 통해 확인할 수 있습니다. 정상 상태의 장비는 하늘색, 복구되지 않은 장애가 있는 장비는 빨간색으로 표시됩니다. 장비 장애 관리는 [스케줄링](https://github.com/yejeeni/AI-Camera-Management-System.wiki.git)을 통해 구현하였습니다.
   많은 양의 마커는 클러스터를 통해 간단하게 확인할 수 있도록 하였습니다. <br> <br> <br>

![지도-마커선택](https://github.com/yejeeni/AI-Camera-Management-System/assets/110469361/8a30c0eb-cf4b-498b-a950-97598d2fb0e0) <br> <br>
   지도 상 마커를 클릭하면 해당하는 장비의 실시간 스트리밍 영상과 장비 상세정보, 객체 인식 기록/장애 발생 기록을 최근 5건까지 확인할 수 있습니다.
   장비 정보를 수정하거나 삭제하고 싶은 경우 수정, 삭제 버튼을 통해 수행할 수 있으며, 마커 역시 수정 사항이 즉시 반영됩니다.

   객체 인식 기록을 클릭 시 당시 상황의 상세정보를 확인할 수 있습니다. 상세정보로는 인식한 상황의 이미지, 장비 ID, 장비명, 일자, 위도 경도, 인식한 객체 수입니다.
   현재 시각으로부터 10분 이내에 발생한 최신 정보는 붉은색 글씨로 표시됩니다.   <br> <br> <br>

![지도-정보](https://github.com/yejeeni/AI-Camera-Management-System/assets/110469361/2c28845c-9237-4c1c-a2d0-6d41d3b1f60a) <br>
   - 상황 정보
   <br>오늘 하루 동안 모든 장비가 인식한 보행자, 자전거, 승용차, 오토바이, 버스, 트럭의 수를 누적하여 도넛 그래프로 보여줍니다. 하단에는 최근 발생한 상황 5건이 노출되며, 클릭 시 지도 중심이 해당 상황을 인식한 장비 마커로 이동하며 이에 대한 상세정보를 열람할 수 있습니다. 

   - 장애 정보
     <br>오늘 하루 동안 모든 장비에서 발생한 연결 장애, CPU 사용량 기준치 초과, 메모리 사용량 기준치 초과 수를 누적하여 도넛 그래프로 보여줍니다. 하단에는 최근 발생한 장애 5건이 노출되며, 클릭 시 지도 중심이 장애가 발생한 장비 마커로 이동합니다. 장애 복구 여부는 Y, N으로 표시됩니다.
 <br> <br> <br>

![지도-장비등록](https://github.com/yejeeni/AI-Camera-Management-System/assets/110469361/f0661405-16c5-4bd5-ae7b-5042d8f37a2f) <br>
   - 장비 등록<br>
   장비명, 카메라 IP, 카메라명, 엣지 ID와 PW, 위도와 경도를 입력하여 장비를 등록할 수 있습니다.
   위도 경도는 지도 선택 버튼을 클릭한 후 지도 상에서 원하는 위치를 클릭하면 해당 위치의 위도 경도가 자동으로 입력됩니다.
   카메라 IP, 위도 경도 입력값이 유효성 검사를 통과하면 장비가 등록되고 해당 위치에 마커가 생성됩니다. <br> <br> <br>

![지도-장비검색](https://github.com/yejeeni/AI-Camera-Management-System/assets/110469361/e3a7a5c5-eaa3-4b97-b56a-0369786f50e5) <br>
   - 장비 검색<br>
   장비 ID, 장비명, 카메라명을 통해 장비를 검색하고 조회할 수 있습니다.
   장비를 클릭하면 마커를 선택했을 때와 동일하게 해당 장비의 실시간 스트리밍 영상과 상세정보, 객체 인식 기록, 장비 장애 기록을 확인할 수 있습니다. <br> <br> <br>

2. 객체 인식 조회 <br> 
![객체인식조회](https://github.com/yejeeni/AI-Camera-Management-System/assets/110469361/8cce2e3f-8b20-4315-9b91-4cc70e5f40e7) <br> <br>
객체 인식 기록을 검색하고 조회할 수 있습니다.
검색 조건은 인식 객체, 일자, 장비 ID, 장비명입니다. 인식 객체를 선택하면 해당 객체만 인식된 기록을 조회하고, 시작 일자는 끝 일자보다 느리거나 끝 일자는 시작 일자보다 빠를 수 없습니다.
원하는 기록을 클릭 시 당시 인식한 상황의 이미지, 장비 ID, 장비명, 일자, 위도 경도, 인식한 객체 수를 확인할 수 있습니다. <br> <br> <br>

3. 장비 장애 조회 <br>
![장비장애조회](https://github.com/yejeeni/AI-Camera-Management-System/assets/110469361/9450cb51-20b9-4894-9428-daff3a6611fa) <br> <br>
장비 장애 기록을 검색하고 조회할 수 있습니다.
검색 조건은 장애 코드, 복구 여부, 일자, 장비 ID, 장비명입니다. 장애 코드와 복구 여부는 반드시 각각 하나 이상 체크되어있어야 합니다.  <br> <br> <br>

## 개선점
- Node.js 서버
  원래 Python에서 전처리 및 후처리를 모두 하려고 했으나, 시간 관계상 중앙 서버에서 이를 하게 되었습니다. HTML5에서 RTSP 통신을 지원하지 않는 문제로 인해 현재는 중앙 서버에서 Node.js를 통해 FFmpeg 라이브러리를 사용하여 전처리 및 후처리를 하고 있으나,
  추후에는 엣지 서버마다 Node.js를 실행하고자 합니다. 이를 통해 카메라의 실시간 스트리밍 영상에서도 B-Box를 확인할 수 있도록 개선할 예정입니다.
